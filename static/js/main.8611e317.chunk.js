(this["webpackJsonpreact-tetris"]=this["webpackJsonpreact-tetris"]||[]).push([[0],{14:function(n,e,t){n.exports=t(22)},19:function(n,e,t){},22:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(8),c=t.n(o),i=(t(19),t(1)),u=function(){return Array.from(Array(20),(function(){return new Array(12).fill([0,"clear"])}))},l=function(n,e,t){for(var r=t.x,a=t.y,o=0;o<n.tetromino.length;o++)for(var c=0;c<n.tetromino[o].length;c++)if(0!==n.tetromino[o][c]&&(!e[o+n.pos.y+a]||!e[o+n.pos.y+a][c+n.pos.x+r]||"clear"!==e[o+n.pos.y+a][c+n.pos.x+r][1]))return!0},f=t(2),s=t(3),d=t(9),m=t.n(d);function p(){var n=Object(f.a)(["\n    display: flex;\n    align-items: flex-start;\n    padding: 40px;\n    margin: 0 auto;\n    max-width: 1200px;\n    justify-content: center;\n    height: calc(100vh - 50px);\n\n    aside {\n        width: 100%;\n        max-width: 250px;\n        display: block;\n        padding: 0 20px;\n    }\n\n    .hint {\n        margin: 0 10px;\n        color: white;\n        font-size: 0.75rem;\n        font-family: Pixel, Arial, Helvetica, sans-serif;\n        line-height: 1.75;\n        align-self: flex-end;\n    }\n"]);return p=function(){return n},n}function b(){var n=Object(f.a)(["\n    width: 100vw;\n    height: 100vh;\n    background: url(",") #000;\n    background-size: cover;\n    overflow: hidden;\n    color: #fff;\n    font-family: Pixel, Arial, Helvetica, sans-serif;\n"]);return b=function(){return n},n}var h=s.a.div(b(),m.a),v=s.a.div(p());function g(){var n=Object(f.a)(["\n    margin: 15px 0;\n    padding: 10px;\n    border: 1px dashed grey;\n\n    div { \n        display: flex;\n        justify-content: space-between;\n    }\n\n    button {\n        outline: none;\n        box-sizing: border-box;\n        padding: 15px;\n        margin: 10px;\n        border-radius: 5px;\n        border: none;\n        color: white;\n        background: #333;\n        font-size: 1rem;\n        outline: none;\n        cursor: pointer;\n    }\n"]);return g=function(){return n},n}var x=s.a.div(g());var O=t(6),E={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},y=function(){var n="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return E[n]},w=function(n,e){var t=Object(r.useState)(u()),a=Object(i.a)(t,2),o=a[0],c=a[1],l=Object(r.useState)(0),f=Object(i.a)(l,2),s=f[0],d=f[1];return Object(r.useEffect)((function(){d(0);var t=function(t){var r=t.map((function(n){return n.map((function(n){return"clear"===n[1]?[0,"clear"]:n}))}));return n.tetromino.forEach((function(e,t){e.forEach((function(e,a){0!==e&&(r[t+n.pos.y][a+n.pos.x]=[e,"".concat(n.collided?"merged":"clear")])}))})),n.collided?(e(),function(n){return n.reduce((function(e,t){return-1===t.findIndex((function(n){return 0===n[0]}))?(d((function(n){return n+1})),e.unshift(new Array(n[0].length).fill([0,"clear"])),e):(e.push(t),e)}),[])}(r)):r};c((function(n){return t(n)}))}),[n,e]),[o,c,s]};function j(){var n=Object(f.a)(["\n    width: calc(100px / 4 * ",");\n    height: calc(100px / 4 * ",");;\n    display: grid;\n    grid-template-rows: repeat(\n        ",",\n        calc(100px / 4 )\n    );\n    grid-template-columns: repeat(",", 1fr);\n    grid-gap: 1px;\n    background: transparent;\n"]);return j=function(){return n},n}function k(){var n=Object(f.a)(["\n    display: grid;\n    grid-template-rows: repeat(\n        ",",\n        calc(25vw / ",")\n    );\n    grid-template-columns: repeat(",", 1fr);\n    grid-gap: 1px;\n    border: 2px solid #333;\n    width: 100%;\n    max-width: 25vw;\n    background: #111;\n"]);return k=function(){return n},n}var S=s.a.div(k(),(function(n){return n.height}),(function(n){return n.width}),(function(n){return n.width})),I=s.a.div(j(),(function(n){return n.width}),(function(n){return n.width}),(function(n){return n.height}),(function(n){return n.width}));function A(){var n=Object(f.a)(["\n  width: auto;\n"]);return A=function(){return n},n}function T(){var n=Object(f.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return T=function(){return n},n}var C=s.a.div(T(),(function(n){return n.color}),(function(n){return 0===n.type?"0px solid":"4px solid"}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color}),(function(n){return n.color})),J=s.a.div(A()),L=a.a.memo((function(n){var e=n.type,t=n.isNewElement;return void 0!==t&&t&&!e?a.a.createElement(J,null):a.a.createElement(C,{type:e,color:E[e].color})})),z=function(n){var e=n.stage;return a.a.createElement(S,{width:e[0].length,height:e.length},e.map((function(n){return n.map((function(n,e){return a.a.createElement(L,{key:e,type:n[0]})}))})))};function Z(){var n=Object(f.a)(["\n    box-sizing: border-box;\n    padding: 20px;\n    margin: 10px 0;\n    min-height: 30px;\n    width: 100%;\n    border-radius: 20px;\n    border: none;\n    color: white;\n    background: #333;\n    font-family: Pixel, Arial, Helvetica, sans-serif;\n    font-size: 1rem;\n    outline: none;\n    cursor: pointer;\n\n    :disabled {\n        background: 111;\n        color: #666;\n    }\n"]);return Z=function(){return n},n}var H=s.a.button(Z()),P=function(n){var e=n.callback,t=n.text,r=n.disabled,o=void 0!==r&&r;return a.a.createElement(H,{onClick:function(){return e()},disabled:o,onMouseDown:function(n){return n.preventDefault()}},t)};function D(){var n=Object(f.a)(["\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    margin: 0 0 20px 0;\n    padding: 20px;\n    border: 4px solid #333;\n    min-height: 30px;\n    width: 100%;\n    border-radius: 20px;\n    color: ",";\n    background: #000;\n    font-family: Pixel,  Arial, Helvetica, sans-serif, Arial, Helvetica, sans-serif;\n    font-size: 0.8rem;\n"]);return D=function(){return n},n}var M=s.a.div(D(),(function(n){return n.gameOver?"red":"#999"})),N=function(n){var e=n.gameOver,t=void 0!==e&&e,r=n.text;return a.a.createElement(M,{gameOver:t},r)},R=function(n){var e=n.nextElement;return a.a.createElement(I,{width:e[0].length,height:e.length},e.map((function(n){return n.map((function(n,e){return a.a.createElement(L,{isNewElement:!0,key:e,type:n})}))})))},B=function(){var n=Object(r.useState)(null),e=Object(i.a)(n,2),t=e[0],o=e[1],c=Object(r.useState)(!1),f=Object(i.a)(c,2),s=f[0],d=f[1],m=Object(r.useState)(!1),p=Object(i.a)(m,2),b=p[0],g=p[1],j=Object(r.useState)(!1),k=Object(i.a)(j,2),S=k[0],I=k[1],A=Object(r.useState)(1500),T=Object(i.a)(A,2),C=T[0],J=T[1],L=function(){var n=Object(r.useState)({pos:{x:0,y:0},tetromino:E[0].shape,nextTetromino:y().shape,collided:!1}),e=Object(i.a)(n,2),t=e[0],a=e[1],o=function(n,e){var t=n.map((function(e,t){return n.map((function(n){return n[t]}))}));return e>0?t.map((function(n){return n.reverse()})):t.reverse()},c=Object(r.useCallback)((function(){a((function(n){return{pos:{x:4,y:0},tetromino:n.nextTetromino,nextTetromino:y().shape,collided:!1}}))}),[]);return[t,function(n){var e=n.x,t=n.y,r=n.collided;a((function(n){return Object(O.a)({},n,{pos:{x:n.pos.x+=e,y:n.pos.y+=t},collided:r})}))},c,function(n,e){var r=Object(O.a)({},t);r.tetromino=o(r.tetromino,e);for(var c=r.pos.x,i=1;l(r,n,{x:0,y:0});)if(r.pos.x+=i,(i=-(i+(i>0?1:-1)))>r.tetromino[0].length)return o(r.tetromino,-e),void(r.pos.x=c);a(r)}]}(),Z=Object(i.a)(L,4),H=Z[0],D=Z[1],M=Z[2],B=Z[3],G=w(H,M),K=Object(i.a)(G,3),U=K[0],W=K[1],V=function(n){var e=Object(r.useState)(0),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(r.useState)(0),u=Object(i.a)(c,2),l=u[0],f=u[1],s=Object(r.useState)(0),d=Object(i.a)(s,2),m=d[0],p=d[1],b=[40,100,300,1200],h=Object(r.useCallback)((function(){n>0&&(o((function(e){return e+b[n-1]*(m+1)})),f((function(e){return e+n})))}),[m,b,n]);return Object(r.useEffect)((function(){h()}),[h,n,a]),[a,o,l,f,m,p]}(K[2]),$=Object(i.a)(V,6),q=$[0],F=$[1],Q=$[2],X=$[3],Y=$[4],_=$[5],nn=function(n){l(H,U,{x:n,y:0})||D({x:n,y:0})},en=function(){console.log("start game"),W(u()),M(),o(C),d(!1),I(!0),F(0),X(0),_(0)},tn=function(n){var e=C;e>500?e=n?e-100:e+100:e>200?e=n?e-50:e+50:e>10&&(e=n?e-10:e+10),e<10&&(e=10),J(e),o(rn())},rn=function(){return C/(Y+1)},an=function(){Q>10*(Y+1)&&(_((function(n){return n+1})),o(rn())),l(H,U,{x:0,y:1})?(H.pos.y<1&&(console.log("GAME OVER!!!"),d(!0),o(null)),D({x:0,y:0,collided:!0})):D({x:0,y:1,collided:!1})},on=function(n){var e=n.keyCode;if(!s)switch(e){case 37:nn(-1);break;case 39:nn(1);break;case 40:o(null),an();break;case 17:case 38:B(U,1);break;case 32:cn();break;case 13:en()}},cn=function(){o(b?rn():null),g((function(n){return!n}))};return function(n,e){var t=Object(r.useRef)();Object(r.useEffect)((function(){t.current=n}),[n]),Object(r.useEffect)((function(){if(null!==e){var n=setInterval((function(){t.current()}),e);return function(){clearInterval(n)}}}),[e])}((function(){an()}),t),a.a.createElement(h,{role:"button",tabIndex:0,onKeyDown:function(n){return on(n)},onKeyUp:function(n){return function(n){var e=n.keyCode;s||40===e&&o(rn())}(n)}},a.a.createElement(v,null,a.a.createElement(z,{stage:U}),a.a.createElement("aside",null,s?a.a.createElement(N,{gameOver:s,text:"Game Over"}):a.a.createElement("div",null,a.a.createElement(N,{text:"Score: ".concat(q)}),a.a.createElement(N,{text:"Rows: ".concat(Q)}),a.a.createElement(N,{text:"Level: ".concat(Y)})),a.a.createElement(x,null,a.a.createElement("span",null,"Speed rate: ",C),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return tn(!0)}},"Increase"),a.a.createElement("button",{onClick:function(){return tn(!1)}},"Decrease"))),a.a.createElement(P,{text:b?"Continue":"Pause",callback:cn,disabled:!S||s}),a.a.createElement(P,{text:"Start game",callback:en}),S?a.a.createElement(R,{nextElement:H.nextTetromino}):null),a.a.createElement("div",{className:"hint"},a.a.createElement("p",null,"Hint:"),a.a.createElement("ul",null,a.a.createElement("li",null,"UP\u2003\u2003\u2003- rotate"),a.a.createElement("li",null,"Ctrl \u2003- rotate"),a.a.createElement("li",null,"Left \u2003- move to left"),a.a.createElement("li",null,"Right\u2003- move to right"),a.a.createElement("li",null,"Down \u2003- increase speed to down"),a.a.createElement("li",null,"Space\u2003- pause/continue game"),a.a.createElement("li",null,"Enter\u2003- start game")))))},G=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))},9:function(n,e,t){n.exports=t.p+"static/media/bg.2810fe6b.png"}},[[14,1,2]]]);
//# sourceMappingURL=main.8611e317.chunk.js.map